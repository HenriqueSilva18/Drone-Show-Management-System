@startuml
' Advanced DDD Domain Model for Shodrone System (Updated Sprint 1 - US110)

' ========== CORE DOMAIN ==========
package "Core Domain" {
    ' ========== ENTITIES & AGGREGATES ==========
    class User <<Entity>> {
        - id: UserId
        - username: Username
        - password: Password
        - email: String
        - phone: String
    }

    class Client <<Entity>> {
        - clientId: ClientId
        - vat: String
        - address: String
        - representatives: List<User>
        - status: ClientStatus
    }

    class DroneModel <<Entity>> {
        - id: DroneModelId
        - name: String
        - language: String
    }

    class Drone <<AggregateRoot>> {
        - id: DroneId
        - droneModel: DroneModel
        - serialNumber: String
        - state: DroneState
        - maintenanceHistory: List<Maintenance>
    }

    class Show <<AggregateRoot>> {
        - id: ShowId
        - date: DateValue
        - figures: List<Figure>
        - drones: List<Drone>
    }

    class Figure <<Entity>> {
        - id: FigureId
        - description: Description
        - dslCode: String
        - version: String
        - exclusive: Boolean
        - client: Client
    }

    class ShowProposal <<Entity>> {
        - id: ProposalId
        - show: Show
        - videoLink: String
    }

    class ShowRequest <<Entity>> {
        - id: ShowRequestId
        - client: Client
        - place: String
        - time: DateValue
        - numberOfDrones: Integer
        - description: Description
        - status: RequestStatus
    }

    ' ========== VALUE OBJECTS ==========
   class UserId <<ValueObject>> {
       - value: String
   }
   class ClientId <<ValueObject>> {
       - value: String
   }
   class DroneId <<ValueObject>> {
       - value: String
   }
   class DroneModelId <<ValueObject>> {
       - value: String
   }
   class ShowId <<ValueObject>> {
       - value: String
   }
   class FigureId <<ValueObject>> {
       - value: String
   }
   class ProposalId <<ValueObject>> {
       - value: String
   }
   class ShowRequestId <<ValueObject>> {
       - value: String
   }
   class Username <<ValueObject>> {
       - value: String
   }
   class Password <<ValueObject>> {
       - value: String
   }
   class DroneState <<ValueObject>> {
       - value: String
   }

    class Maintenance <<ValueObject>> {
        - maintenanceStartDate: DateValue
        - maintenanceEndDate: DateValue
    }
   class DateValue <<ValueObject>> {
       - value: String
   }

   class Description <<ValueObject>> {
       - value: String
   }

   class RequestStatus <<ValueObject>> {
       - value: String
   }

    class Position <<ValueObject>> {
        - x: Integer
        - y: Integer
        - z: Integer
    }
class ClientStatus <<ValueObject>> {
    - value: String
}

    ' ========== DOMAIN EVENTS =========
    class DroneMaintenanceCompletedEvent <<DomainEvent>> {
        - droneId: DroneId
        - maintenance: Maintenance
        - occurredOn: DateValue
    }

    class ShowScheduledEvent <<DomainEvent>> {
        - showId: ShowId
        - scheduledDate: DateValue
    }

    class CollisionDetectedEvent <<DomainEvent>> {
        - droneId: DroneId
        - position: Position
        - timestamp: DateValue
    }

    ' ========== REPOSITORIES =========
    interface DroneRepository <<Repository>> {
        + save(drone: Drone): void
        + findById(id: DroneId): Drone
        + findAvailableDrones(): List<Drone>
    }

    interface ShowRepository <<Repository>> {
        + save(show: Show): void
        + findById(id: ShowId): Show
    }

    interface ShowRequestRepository <<Repository>> {
        + save(request: ShowRequest): void
        + findById(id: ShowRequestId): ShowRequest
    }

    ' ========== SPECIFICATIONS =========
    class DroneAvailableSpecification <<Specification>> {
        + isSatisfiedBy(drone: Drone): Boolean
    }

    ' ========== DOMAIN SERVICES =========
    class Inventory <<DomainService>> {
        + getAvailableDrones(): List<Drone>
    }

    class SimulationService <<DomainService>> {
        + simulateFigure(figure: Figure): String
    }

    ' ========== APPLICATION SERVICES =========
    class ShowApplicationService <<ApplicationService>> {
        + scheduleShow(showProposal: ShowProposal): ShowScheduledEvent
    }
}

' ========== ANTI-CORRUPTION LAYER ==========
package "Anti-Corruption Layer" {
    class ExternalDroneSystemAdapter <<AntiCorruptionLayer>> {
        + fetchDroneStatus(droneId: String): String
    }
}

' ========== RELATIONSHIPS ==========
User --> UserId
User --> Username
User --> Password
Client --> ClientId
Client --> ClientStatus
DroneModel --> DroneModelId
Drone --> DroneId
Drone --> DroneModel
Drone --> DroneState
Drone --> Maintenance
Show --> ShowId
Show --> DateValue
Show --> Figure
Show --> Drone
Figure --> FigureId
Figure --> Description
Figure --> Client
ShowProposal --> ProposalId
ShowProposal --> Show
ShowRequest --> ShowRequestId
ShowRequest --> Client
ShowRequest --> DateValue
ShowRequest --> Description
ShowRequest --> RequestStatus
Maintenance --> DateValue
Drone --> DroneMaintenanceCompletedEvent : triggers
Show --> ShowScheduledEvent : triggers
Drone --> CollisionDetectedEvent : triggers
DroneRepository ..> Drone
ShowRepository ..> Show
ShowRequestRepository ..> ShowRequest
Inventory ..> DroneAvailableSpecification : uses
ShowApplicationService ..> ShowRepository : uses
ShowApplicationService ..> ShowScheduledEvent : triggers
Inventory ..> ExternalDroneSystemAdapter : integrates
@enduml
